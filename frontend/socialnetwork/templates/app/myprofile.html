{% extends 'app/base.html' %}
{% load static %}

{% block profile %}
<!-- Avatar + Info -->
<div id="profile" class="flex flex-col items-center mt-10 px-4">
  <!-- JS sẽ render avatar, tên, bio vào đây -->
</div>
<div id="avatarModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
  <img id="avatarModalImg" class="max-h-[90%] max-w-[90%] rounded-lg shadow-lg" src="" alt="Avatar">
</div>

<!-- Tabs -->
<div class="mt-6 border-t border-gray-300">
  <nav id="tabs" class="flex justify-center gap-6 px-8 text-gray-600">
    <a href="" data-tab="posts" class="py-3 border-b-2 border-indigo-600 text-indigo-600 font-medium">Bài viết</a>
    <a href="" data-tab="introduce" class="py-3 hover:text-indigo-600">Giới thiệu</a>
    <a href="" data-tab="friends" class="py-3 hover:text-indigo-600">Bạn bè</a>
    <a href="" data-tab="photos" class="py-3 hover:text-indigo-600">Ảnh</a>
  </nav>
</div>

<!-- Dynamic Content -->
<div id="content" class="px-4 mt-6 space-y-6 max-w-2xl mx-auto"></div>

<!-- Photo Modal -->
<div id="photoModal" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
  <div class="relative w-[90%] max-w-[90vw] text-center">
    <button id="closeModal" class="absolute top-6 right-6 text-white hover:text-gray-300 text-4xl font-bold z-50">&times;</button>
    <img id="photoModalImg" src="" alt="Preview" class="w-full max-h-[90vh] object-contain rounded-lg mx-auto">
    <p id="photoModalCaption" class="mt-4 text-white text-lg font-medium"></p>
    <button id="prevPhoto" class="absolute left-4 top-1/2 -translate-y-1/2 px-4 py-2 text-white text-4xl bg-black bg-opacity-50 rounded-full hover:bg-opacity-70 z-40">‹</button>
    <button id="nextPhoto" class="absolute right-4 top-1/2 -translate-y-1/2 px-4 py-2 text-white text-4xl bg-black bg-opacity-50 rounded-full hover:bg-opacity-70 z-40">›</button>
  </div>
</div>

<!-- Reactions Modal -->
<div id="reactionsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white w-96 max-h-[80vh] rounded-lg overflow-y-auto p-4">
    <div class="flex justify-between items-center mb-3">
      <h2 class="text-lg font-semibold">Người đã thả cảm xúc</h2>
      <button id="closeReactionsModal" class="text-gray-500 hover:text-black">&times;</button>
    </div>
    <div id="reactionsList" class="space-y-3"></div>
  </div>
</div>

<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-xl shadow-lg p-6 w-96 text-center">
    <h3 class="text-lg font-semibold mb-4">⚠️ Xác nhận xóa bài viết</h3>
    <p class="mb-6">Bạn có chắc chắn muốn xóa bài viết này? Hành động này không thể hoàn tác.</p>
    <div class="flex justify-center gap-4">
      <button id="cancelDelete" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Hủy</button>
      <button id="confirmDelete" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Xóa</button>
    </div>
  </div>
</div>
<div id="toast" class="fixed bottom-5 right-5 bg-green-500 text-white px-4 py-3 rounded shadow-lg hidden">
  ✅ Bài viết đã được xóa thành công!
</div>

<script>window.user_id = "{{ user_id }}";</script>
<script type="module" src="{% static 'js/userpage/userpage.js' %}"></script>
{% endblock profile %}
